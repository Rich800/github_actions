create_commit:
  runs-on: ubuntu-latest
  permissions:
    contents: write
  steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      with:
        persist-credentials: true  # permet de push directement

    - name: Run pytest and save log
      run: |
        pytest >> log_pytest.txt

    - name: Commit and push changes
      run: |
        git config --global user.email "my-bot@bot.com"
        git config --global user.name "my-bot"
        git add log_pytest.txt
        git commit -m "Add pytest log from workflow" || echo "No changes to commit"
        git push
        git status
